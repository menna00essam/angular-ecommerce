<nav class="mb-8 py-4 mt-2 container" aria-label="Breadcrumb">
  <div class="flex items-center space-x-3 rtl:space-x-reverse">
    <a
      routerLink="/"
      class="text-primary font-medium transition-colors duration-200 hover:underline"
      [attr.aria-label]="'login.home' | translate"
    >
      {{ 'login.home' | translate }}
    </a>
    <span class="text-gray-400 font-light">/</span>
    <span class="text-gray-800 font-semibold">
      {{ 'register.register' | translate }}
    </span>
  </div>
</nav>

<div
  class="min-h-screen container flex flex-col md:flex-row items-center justify-center px-4 pt-0 pb-6 md:px-6 lg:px-8 lg:pt-0"
>
  <div
    class="w-full md:w-1/2 p-4 md:p-8 flex flex-col justify-center space-y-6"
  >
    <h2
      id="registerTitle"
      class="text-3xl md:text-4xl font-bold text-natural dark:text-white"
    >
      {{ 'register.title' | translate }}
    </h2>
    <p
      class="text-sm md:text-base text-gray-600 dark:text-gray-400 leading-relaxed"
    >
      {{ 'register.description' | translate }}
    </p>

    <form
      [formGroup]="registerForm"
      (ngSubmit)="onSubmit()"
      class="space-y-4 md:space-y-5"
      role="form"
      aria-labelledby="registerTitle"
      novalidate
    >
      <div>
        <label
          for="username"
          class="block mb-1 text-sm font-medium text-natural dark:text-white"
        >
          {{ 'register.usernameLabel' | translate }}
        </label>
        <div class="relative">
          <input
            id="username"
            type="text"
            formControlName="username"
            [placeholder]="'register.usernamePlaceholder' | translate"
            class="w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-primary dark:bg-surface dark:text-natural"
            aria-required="true"
            [attr.aria-invalid]="f['username'].invalid"
            aria-describedby="usernameError"
            autocomplete="username"
          />
          <svg
            class="w-5 h-5 text-gray-500 dark:text-gray-400 absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            viewBox="0 0 24 24"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path d="M16 12v4a4 4 0 1 1-8 0v-4"></path>
            <circle cx="12" cy="7" r="4"></circle>
          </svg>
        </div>
        <div
          *ngIf="f['username'].invalid && (f['username'].dirty || f['username'].touched)"
          id="usernameError"
          class="text-danger text-xs mt-1"
          aria-live="polite"
        >
          <div *ngIf="f['username'].errors?.['required']">
            {{ 'register.usernameRequired' | translate }}
          </div>
          <div *ngIf="f['username'].errors?.['minlength']">
            {{ 'register.usernameMinLength' | translate }}
          </div>
        </div>
      </div>

      <div>
        <label
          for="email"
          class="block mb-1 text-sm font-medium text-natural dark:text-white"
        >
          {{ 'register.emailLabel' | translate }}
        </label>
        <div class="relative">
          <input
            id="email"
            type="email"
            formControlName="email"
            [placeholder]="'register.emailPlaceholder' | translate"
            class="w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-primary dark:bg-surface dark:text-natural"
            aria-required="true"
            [attr.aria-invalid]="f['email'].invalid"
            aria-describedby="emailError"
            autocomplete="email"
          />
          <svg
            class="w-5 h-5 text-gray-500 dark:text-gray-400 absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            viewBox="0 0 24 24"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path d="M4 4h16v16H4z"></path>
            <path d="M22 6l-10 7L2 6"></path>
          </svg>
        </div>
        <div
          *ngIf="f['email'].invalid && (f['email'].dirty || f['email'].touched)"
          id="emailError"
          class="text-danger text-xs mt-1"
          aria-live="polite"
        >
          <div *ngIf="f['email'].errors?.['required']">
            {{ 'register.emailRequired' | translate }}
          </div>
          <div *ngIf="f['email'].errors?.['email']">
            {{ 'register.emailInvalid' | translate }}
          </div>
        </div>
      </div>

      <div>
        <label
          for="password"
          class="block mb-1 text-sm font-medium text-natural dark:text-white"
        >
          {{ 'register.passwordLabel' | translate }}
        </label>
        <div class="relative">
          <input
            [type]="showPassword ? 'text' : 'password'"
            id="password"
            formControlName="password"
            [placeholder]="'register.passwordPlaceholder' | translate"
            class="w-full pl-10 pr-10 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-primary dark:bg-surface dark:text-natural"
            aria-required="true"
            [attr.aria-invalid]="f['password'].invalid"
            aria-describedby="passwordError"
            autocomplete="new-password"
          />
          <svg
            class="w-5 h-5 text-gray-500 dark:text-gray-400 absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            viewBox="0 0 24 24"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
            <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
          </svg>
          <button
            type="button"
            (click)="toggleShowPassword()"
            class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400 focus:outline-none"
            [attr.aria-label]="showPassword ? 'Hide password' : 'Show password'"
            [attr.aria-pressed]="showPassword"
          >

        </button>
        </div>
        <div
          *ngIf="f['password'].invalid && (f['password'].dirty || f['password'].touched)"
          id="passwordError"
          class="text-danger text-xs mt-1"
          aria-live="polite"
        >
          <div *ngIf="f['password'].errors?.['required']">
            {{ 'register.passwordRequired' | translate }}
          </div>
          <div *ngIf="f['password'].errors?.['minlength']">
            {{ 'register.passwordMinLength' | translate }}
          </div>
        </div>
      </div>

      <div>
        <label
          for="confirmPassword"
          class="block mb-1 text-sm font-medium text-natural dark:text-white"
        >
          {{ 'register.confirmPasswordLabel' | translate }}
        </label>
        <div class="relative">
          <input
            [type]="showPassword ? 'text' : 'password'"
            id="confirmPassword"
            formControlName="confirmPassword"
            [placeholder]="'register.confirmPasswordPlaceholder' | translate"
            class="w-full pl-10 pr-10 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-primary dark:bg-surface dark:text-natural"
            aria-required="true"
            [attr.aria-invalid]="f['confirmPassword'].invalid"
            aria-describedby="confirmPasswordError"
            autocomplete="new-password"
          />
        </div>
        <div
          *ngIf="f['confirmPassword'].invalid && (f['confirmPassword'].dirty || f['confirmPassword'].touched)"
          id="confirmPasswordError"
          class="text-danger text-xs mt-1"
          aria-live="polite"
        >
          <div *ngIf="f['confirmPassword'].errors?.['required']">
            {{ 'register.confirmPasswordRequired' | translate }}
          </div>
          <div *ngIf="f['confirmPassword'].errors?.['mustMatch']">
            {{ 'register.passwordsMismatch' | translate }}
          </div>
        </div>
      </div>

      <button
        type="submit"
        [disabled]="registerForm.invalid || isLoading()"
        class="w-full bg-primary hover:bg-[#57bca7] text-white font-semibold py-2 rounded-md transition disabled:opacity-50 disabled:cursor-not-allowed flex justify-center items-center"
        [attr.aria-label]="'register.buttonText' | translate"
        [attr.aria-busy]="isLoading()"
      >
        <ng-container *ngIf="!isLoading()">
          {{ 'register.buttonText' | translate }}
        </ng-container>
        <ng-container *ngIf="isLoading()">
          <svg
            class="animate-spin mr-2 h-5 w-5 text-white"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
          >
            <circle
              class="opacity-25"
              cx="12"
              cy="12"
              r="10"
              stroke="currentColor"
              stroke-width="4"
            ></circle>
            <path
              class="opacity-75"
              fill="currentColor"
              d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"
            ></path>
          </svg>
          {{ 'register.loadingText' | translate }}
        </ng-container>
      </button>
    </form>

    <p class="mt-6 text-center text-sm text-gray-600 dark:text-gray-400">
      {{ 'register.haveAccount' | translate }}
      <a [routerLink]="['/auth/login']" class="text-primary-600 font-medium">
        {{ 'register.loginLink' | translate }}
      </a>
    </p>
  </div>

  <div
    class="hidden md:block border-l border-gray-300 dark:border-gray-600 mx-6 h-[600px]"
  ></div>

  <div class="hidden md:block w-1/2">
    <img
      src="../../../../assets/images/Loginpic.PNG"
      alt="Register illustration showing a person logging in to an application"
      class="object-cover h-full w-full"
    />
  </div>
</div>
